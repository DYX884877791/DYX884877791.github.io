(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{220:function(s,t,a){s.exports=a.p+"assets/img/15.72a8413a.png"},221:function(s,t,a){s.exports=a.p+"assets/img/16.de4d36d0.png"},251:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"redis初识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis初识","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis初识")]),s._v(" "),n("h2",{attrs:{id:"redis是什么？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis是什么？","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis是什么？")]),s._v(" "),n("p",[s._v("一个开源的使用ANSI C语言编写（Salvatore Sanfilippo）、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、高性能的Key-Value存储服务系统")]),s._v(" "),n("h2",{attrs:{id:"redis特性："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis特性：","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis特性：")]),s._v(" "),n("ul",[n("li",[s._v("速度快 - Redis能读的速度是110000次/s,写的速度是81000次/s。\n"),n("ul",[n("li",[s._v("c语言实现，距离系统底层更近")]),s._v(" "),n("li",[s._v("数据都在内存中")]),s._v(" "),n("li",[s._v("单线程，避免线程切换开销以及多线程的竞争问题")]),s._v(" "),n("li",[s._v("采用epoll模型，非阻塞I/O，不在网络上浪费时间")])])]),s._v(" "),n("li",[s._v("丰富的数据类型 – Redis支持String（字符串）、List（列表）、Hash（哈希）、Set（集合）及Ordered Set/ZSet(有序集合)等五种主要的数据类型。\n"),n("ul",[n("li",[s._v("BitMaps 位图 布隆过滤器")]),s._v(" "),n("li",[s._v("HyperLoglog 超小内存唯一值计数")]),s._v(" "),n("li",[s._v("GEO 地理信息定位")])])]),s._v(" "),n("li",[s._v("丰富的特性 – Redis还支持慢查询分析、性能测试、Pipeline、事务、Lua自定义命令、Bitmaps、HyperLogLog（2.8.19版本以后提供）、发布/订阅、Geo（3.2版本以后提供）等个性化功能。\n"),n("ul",[n("li",[s._v("可设置键过期")]),s._v(" "),n("li",[s._v("给予发布订阅可实现简单的消息队列")]),s._v(" "),n("li",[s._v("通过Lua创建新命令，具有原子性")]),s._v(" "),n("li",[s._v("Popeline功能，减少网络开销")])])]),s._v(" "),n("li",[s._v("支持数据持久化 - Redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用。（RDB/AOF两种方式实现持久化）")]),s._v(" "),n("li",[s._v("支持的客户端语言多（基于TCP协议进行通信），比如PHP/Golang/Java/Python等")]),s._v(" "),n("li",[s._v("服务器简单\n"),n("ul",[n("li",[s._v("代码优雅 - （早期单机版核心代码:23000 lines code）")]),s._v(" "),n("li",[s._v("采用单线程模型，减少竞争，规避并发问题")]),s._v(" "),n("li",[s._v("不依赖操作系统类库（比如libevent），如多路复用Redis自己实现了")])])]),s._v(" "),n("li",[s._v("主从复制\n"),n("ul",[n("li",[s._v("主服务器上的数据可以同步到从服务器上，是高可用及分布式的功能的基础")])])]),s._v(" "),n("li",[s._v("高可用/分布式\n"),n("ul",[n("li",[s._v("高可用 - Redis-Sentinel(v2.8)支持高可用")]),s._v(" "),n("li",[s._v("分布式 - Redis-Cluster(v3.0)支持分布式")])])])]),s._v(" "),n("h2",{attrs:{id:"redis的典型应用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis的典型应用场景","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis的典型应用场景")]),s._v(" "),n("ul",[n("li",[s._v("缓存系统 - 作为数据库中数据的缓存，应用先访问缓存，如果缓存中有数据，则直接返回；如果没有则从数据库中获取返回，并同时将数据存入缓存，方便下次读取")]),s._v(" "),n("li",[s._v("计数器 - 比如微博的转发数、评论数")]),s._v(" "),n("li",[s._v("消息队列系统")]),s._v(" "),n("li",[s._v("排行榜 - 有序集合")]),s._v(" "),n("li",[s._v("社交网络")]),s._v(" "),n("li",[s._v("实时系统 - 布隆过滤器（Bitmap）实现实时的垃圾邮件处理系统")])]),s._v(" "),n("h2",{attrs:{id:"redis的安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis的安装","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis的安装")]),s._v(" "),n("h3",{attrs:{id:"下载并安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载并安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 下载并安装")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在Linux环境下操作，需要安装gcc（yum install gcc-c++）")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://download.redis.io/releases/redis-3.0.7.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf redis-3.0.7.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s redis-3.0.7 redis\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" redis\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])])]),s._v(" "),n("li",[n("p",[s._v("安装好Redis后，其可执行文件位于/usr/local/bin下，可在任意位置下执行该文件，同时编译成功后，在解压目录src目录下，也有可执行文件：")]),s._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@test src"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll | grep redis-")]),s._v("\n-rwxr-xr-x. 1 root root 4589163 7月  11 02:56 redis-benchmark\n-rw-rw-r--. 1 root root   28351 1月  25 2016 redis-benchmark.c\n-rw-r--r--. 1 root root   63200 7月  11 02:56 redis-benchmark.o\n-rwxr-xr-x. 1 root root   22225 7月  11 02:56 redis-check-aof\n-rw-rw-r--. 1 root root    6328 1月  25 2016 redis-check-aof.c\n-rw-r--r--. 1 root root   20680 7月  11 02:56 redis-check-aof.o\n-rwxr-xr-x. 1 root root   45435 7月  11 02:56 redis-check-dump\n-rw-rw-r--. 1 root root   22274 1月  25 2016 redis-check-dump.c\n-rw-r--r--. 1 root root   45408 7月  11 02:56 redis-check-dump.o\n-rwxr-xr-x. 1 root root 4698370 7月  11 02:56 redis-cli\n-rw-rw-r--. 1 root root   75872 1月  25 2016 redis-cli.c\n-rw-r--r--. 1 root root  193944 7月  11 02:56 redis-cli.o\n-rwxr-xr-x. 1 root root 6471159 7月  11 02:56 redis-sentinel\n-rwxr-xr-x. 1 root root 6471159 7月  11 02:56 redis-server\n-rwxrwxr-x. 1 root root   60527 1月  25 2016 redis-trib.rb\n")])])])])]),s._v(" "),n("h3",{attrs:{id:"可执行文件说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#可执行文件说明","aria-hidden":"true"}},[s._v("#")]),s._v(" 可执行文件说明")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[s._v("文件名")]),s._v(" "),n("th",{staticStyle:{"text-align":"left"}},[s._v("作用")])])]),s._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("redis-server")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("Redis服务器")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("redis-cli")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("Redis命令行客户端")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("redis-benchmark")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("Redis性能测试")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("redis-check-aof")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("AOF文件修复工具")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("redis-check-dump")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("RDB文件修复工具")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[s._v("redis-sentinel")]),s._v(" "),n("td",{staticStyle:{"text-align":"left"}},[s._v("Sentinel服务器(2.8以后）")])])])]),s._v(" "),n("h3",{attrs:{id:"三种启动方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三种启动方式","aria-hidden":"true"}},[s._v("#")]),s._v(" 三种启动方式")]),s._v(" "),n("ol",[n("li",[s._v("最简单启动：\n"),n("ul",[n("li",[s._v("redis安装编译后直接运行bin/redis-server，使用默认配置启动，默认端口为6379")]),s._v(" "),n("li",[s._v("ps -ef|grep redis (查看redis进程）")]),s._v(" "),n("li",[s._v("netstat -antpl|grep redis（查看redis所占用的端口）")]),s._v(" "),n("li",[s._v("redis-cli -h ip -p port ping（使用Redis命令行客户端连接服务器，指定ip和port，如果不指定则为默认值localhost:6379，并运行ping命令）（使用exit可退出命令行客户端）"),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@test redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/bin/redis-cli -h 127.0.0.1 -p 6379")]),s._v("\n127.0.0.1:6379"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v("\nPONG\n127.0.0.1:6379"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hello world\nOK\n127.0.0.1:6379"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get hello\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"world"')]),s._v("\n")])])])]),s._v(" "),n("li",[s._v('图中用"ping"命令测试，当返回"pong"时，说明连接成功，并set值（string类型），key为"hello"，value为"world"，get hello则返回其value')])])]),s._v(" "),n("li",[s._v("动态参数启动：\n"),n("ul",[n("li",[s._v("运行redis-server --port 6380 (指定启动端口为6380)")])])]),s._v(" "),n("li",[s._v("配置文件启动：\n"),n("ul",[n("li",[s._v("运行redis-server configFile （使用配置文件的方式启动）")])])])]),s._v(" "),n("h3",{attrs:{id:"三种启动方式的比较"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三种启动方式的比较","aria-hidden":"true"}},[s._v("#")]),s._v(" 三种启动方式的比较")]),s._v(" "),n("ul",[n("li",[s._v("生产环境建议选择配置文件启动")]),s._v(" "),n("li",[s._v("单机多实例配置文件可以使用端口号区分开")])]),s._v(" "),n("h3",{attrs:{id:"停止redis"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#停止redis","aria-hidden":"true"}},[s._v("#")]),s._v(" 停止redis")]),s._v(" "),n("ul",[n("li",[s._v("运行redis-cli -p 6379 shutdown （停止在此端口运行的Redis，默认端口为6379）"),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@test redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-cli -p 6379 shutdown")]),s._v("\n")])])]),s._v("日志打印出："),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("33184:M 11 Jul 08:24:13.412 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# User requested shutdown...")]),s._v("\n33184:M 11 Jul 08:24:13.412 * Saving the final RDB snapshot before exiting.\n33184:M 11 Jul 08:24:13.425 * DB saved on disk\n33184:M 11 Jul 08:24:13.425 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis is now ready to exit, bye bye...")]),s._v("\n")])])])]),s._v(" "),n("li",[s._v("shutdown有一个参数，代表是否在关闭Redis前，生成持久化文件："),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("redis-cli shutdown nosave|save\n")])])])]),s._v(" "),n("li",[s._v("还可以通过kill进程号的方式关闭redis服务，但是不能通过kill -9强制杀死redis的服务。如果强制杀死redis服务不会进行持久化操作，也不会对缓冲区资源优雅关闭，还可能丢失数据。")])]),s._v(" "),n("h2",{attrs:{id:"redis客户端及常用配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis客户端及常用配置","aria-hidden":"true"}},[s._v("#")]),s._v(" Redis客户端及常用配置")]),s._v(" "),n("ol",[n("li",[s._v("Redis客户端返回值\n"),n("ol",[n("li",[s._v("状态回复："),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("127.0.0.1:6379"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v("\nPONG\n")])])])]),s._v(" "),n("li",[s._v("错误回复："),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("127.0.0.1:6379"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" hget hello field\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" WRONGTYPE Operation against a key holding the wrong kind of value\n")])])])]),s._v(" "),n("li",[s._v("整数回复："),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("127.0.0.1:6379> set index 0\nOK\n127.0.0.1:6379> incr index\n(integer) 1\n127.0.0.1:6379> decr index\n(integer) 0\n")])])])]),s._v(" "),n("li",[s._v("字符串回复："),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('127.0.0.1:6379> set hello world\nOK\n127.0.0.1:6379> get hello\n"world"\n')])])])]),s._v(" "),n("li",[s._v("多行字符串回复："),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("127.0.0.1:6379"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mset hello world hi redis\nOK\n127.0.0.1:6379"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mget hello hi\n1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"world"')]),s._v("\n2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis"')]),s._v("\n")])])])])])]),s._v(" "),n("li",[s._v("Redis常用配置\n"),n("ol",[n("li",[s._v("daemonize：是否以守护进程的方式启动Redis，默认为no")]),s._v(" "),n("li",[s._v("port：Redis对外的端口，使用单机多实例配置启动时必须要配置端口号，否则会冲突，默认端口号为6379")]),s._v(" "),n("li",[s._v("logfile：指定Redis的系统日志的文件名")]),s._v(" "),n("li",[s._v("dir：指定Redis的工作目录的目录名字"),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("daemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nport 6380\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6380.log"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" ./ \n")])])])]),s._v(" "),n("li",[s._v("其他如RDB config、AOF config、slow Log config、maxMemory等")]),s._v(" "),n("li",[s._v("查看配置信息：在Redis客户端命令行中输入config get *，查看配置信息，key-value形式，总共130行共65个配置："),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("127.0.0.1:6379"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" config get *\n1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dbfilename"')]),s._v("\n2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dump.rdb"')]),s._v("\n3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"requirepass"')]),s._v("\n4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"masterauth"')]),s._v("\n6"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n7"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"unixsocket"')]),s._v("\n8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n9"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"logfile"')]),s._v("\n10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n11"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pidfile"')]),s._v("\n12"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/run/redis.pid"')]),s._v("\n13"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maxmemory"')]),s._v("\n14"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n15"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maxmemory-samples"')]),s._v("\n16"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v("\n17"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"timeout"')]),s._v("\n18"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n19"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tcp-keepalive"')]),s._v("\n20"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n21"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auto-aof-rewrite-percentage"')]),s._v("\n22"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),s._v("\n23"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auto-aof-rewrite-min-size"')]),s._v("\n24"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"67108864"')]),s._v("\n25"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-max-ziplist-entries"')]),s._v("\n26"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512"')]),s._v("\n27"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hash-max-ziplist-value"')]),s._v("\n28"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"64"')]),s._v("\n29"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list-max-ziplist-entries"')]),s._v("\n30"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512"')]),s._v("\n31"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list-max-ziplist-value"')]),s._v("\n32"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"64"')]),s._v("\n33"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"set-max-intset-entries"')]),s._v("\n34"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512"')]),s._v("\n35"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zset-max-ziplist-entries"')]),s._v("\n36"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"128"')]),s._v("\n37"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zset-max-ziplist-value"')]),s._v("\n38"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"64"')]),s._v("\n39"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hll-sparse-max-bytes"')]),s._v("\n40"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3000"')]),s._v("\n41"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lua-time-limit"')]),s._v("\n42"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5000"')]),s._v("\n43"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"slowlog-log-slower-than"')]),s._v("\n44"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10000"')]),s._v("\n45"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latency-monitor-threshold"')]),s._v("\n46"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n47"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"slowlog-max-len"')]),s._v("\n48"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"128"')]),s._v("\n49"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"port"')]),s._v("\n50"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6379"')]),s._v("\n51"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tcp-backlog"')]),s._v("\n52"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"511"')]),s._v("\n53"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"databases"')]),s._v("\n54"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"16"')]),s._v("\n55"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"repl-ping-slave-period"')]),s._v("\n56"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v("\n57"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"repl-timeout"')]),s._v("\n58"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"60"')]),s._v("\n59"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"repl-backlog-size"')]),s._v("\n60"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1048576"')]),s._v("\n61"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"repl-backlog-ttl"')]),s._v("\n62"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3600"')]),s._v("\n63"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maxclients"')]),s._v("\n64"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10000"')]),s._v("\n65"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watchdog-period"')]),s._v("\n66"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n67"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"slave-priority"')]),s._v("\n68"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100"')]),s._v("\n69"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"min-slaves-to-write"')]),s._v("\n70"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n71"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"min-slaves-max-lag"')]),s._v("\n72"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v("\n73"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hz"')]),s._v("\n74"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v("\n75"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster-node-timeout"')]),s._v("\n76"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"15000"')]),s._v("\n77"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster-migration-barrier"')]),s._v("\n78"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n79"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster-slave-validity-factor"')]),s._v("\n80"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v("\n81"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"repl-diskless-sync-delay"')]),s._v("\n82"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v("\n83"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster-require-full-coverage"')]),s._v("\n84"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n85"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-appendfsync-on-rewrite"')]),s._v("\n86"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v("\n87"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"slave-serve-stale-data"')]),s._v("\n88"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n89"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"slave-read-only"')]),s._v("\n90"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n91"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stop-writes-on-bgsave-error"')]),s._v("\n92"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n93"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"daemonize"')]),s._v("\n94"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v("\n95"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rdbcompression"')]),s._v("\n96"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n97"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rdbchecksum"')]),s._v("\n98"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n99"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"activerehashing"')]),s._v("\n100"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n101"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"repl-disable-tcp-nodelay"')]),s._v("\n102"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v("\n103"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"repl-diskless-sync"')]),s._v("\n104"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v("\n105"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aof-rewrite-incremental-fsync"')]),s._v("\n106"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n107"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aof-load-truncated"')]),s._v("\n108"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yes"')]),s._v("\n109"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendonly"')]),s._v("\n110"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v("\n111"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dir"')]),s._v("\n112"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/software/redis-3.0.7/src"')]),s._v("\n113"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maxmemory-policy"')]),s._v("\n114"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"noeviction"')]),s._v("\n115"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appendfsync"')]),s._v("\n116"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"everysec"')]),s._v("\n117"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"save"')]),s._v("\n118"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3600 1 300 100 60 10000"')]),s._v("\n119"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"loglevel"')]),s._v("\n120"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"notice"')]),s._v("\n121"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"client-output-buffer-limit"')]),s._v("\n122"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"normal 0 0 0 slave 268435456 67108864 60 pubsub 33554432 8388608 60"')]),s._v("\n123"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"unixsocketperm"')]),s._v("\n124"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n125"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"slaveof"')]),s._v("\n126"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n127"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"notify-keyspace-events"')]),s._v("\n128"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n129"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bind"')]),s._v("\n130"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n")])])])])])]),s._v(" "),n("li",[s._v("(示例)采用不同的配置文件启动多个Redis，分别以6381、6382端口:\n"),n("ol",[n("li",[s._v("以原始文件redis.conf为模本修改对应的配置文件"),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@test redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# cat redis.conf | grep -v "#" | grep -v "^$" > redis.6381.conf')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@test redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# cat redis.conf | grep -v "#" | grep -v "^$" > redis.6382.conf ')]),s._v("\n")])])])]),s._v(" "),n("li",[s._v("分别修改redis.6381.conf、redis.6382.conf"),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("daemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nport 6381\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6381.log"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/software/redis-3.0.7/data"')]),s._v(" \n")])])]),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("daemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nport 6382\nlogfile "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6382.log"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/software/redis-3.0.7/data"')]),s._v(" \n")])])])]),s._v(" "),n("li",[s._v("创建data目录，否则启动报错"),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@test redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-server redis.6381.conf")]),s._v("\n33283:C 11 Jul 08:49:55.232 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Can't chdir to '/opt/software/redis-3.0.7/data': No such file or directory")]),s._v("\n")])])]),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@test redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir data")]),s._v("\n")])])])]),s._v(" "),n("li",[s._v("启动两个Redis进程\n"),n("ol",[n("li",[s._v("启动端口号为6381的redis:"),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@test redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-server redis.6381.conf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@test redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef|grep redis")]),s._v("\nroot      33302      1  0 08:52 ?        00:00:00 redis-server *:6381\nroot      33306   2574  0 08:52 pts/0    00:00:00 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" redis\n")])])])]),s._v(" "),n("li",[s._v("日志记录在6381.log文件中:"),n("img",{attrs:{src:a(220),alt:"查看6381日志"}})]),s._v(" "),n("li",[s._v("启动端口号为6382的redis:"),n("img",{attrs:{src:a(221),alt:"6382启动"}})])])])])])])])},[],!1,null,null,null);t.default=e.exports}}]);